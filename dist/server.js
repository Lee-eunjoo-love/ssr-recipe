(()=>{"use strict";var e={n:r=>{var t=r&&r.__esModule?()=>r.default:()=>r;return e.d(t,{a:t}),t},d:(r,t)=>{for(var n in t)e.o(t,n)&&!e.o(r,n)&&Object.defineProperty(r,n,{enumerable:!0,get:t[n]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r)};const r=require("react-dom/server");var t=e.n(r);const n=require("express");var s=e.n(n);const o=require("react-router-dom"),i=require("react/jsx-runtime"),c=()=>{const e=[{name:"Red",path:"/red"},{name:"Blue",path:"/blue"},{name:"Users",path:"/users"},{name:"Counter",path:"/counter"},{name:"About",path:"/about"}],r={display:"inline-block",minWidth:150,textDecoration:"none"};return(0,i.jsx)("ul",{style:{listStyle:"none"},children:e&&e.map(e=>(0,i.jsx)("li",{style:r,children:(0,i.jsx)(o.Link,{to:e.path,children:e.name})},e.name))})},a=()=>{const{id:e}=(0,o.useParams)();return(0,i.jsxs)("div",{className:"red",children:["Red ",e]})},u=()=>(0,i.jsx)(a,{}),l=()=>(0,i.jsx)("div",{className:"blue",children:"Blue"}),d=()=>(0,i.jsx)(l,{}),p=require("react-redux"),h=e=>{if(e&&e.users)return(0,i.jsx)("div",{children:(0,i.jsx)("section",{children:e&&e.users&&(0,i.jsx)("ul",{children:e.users.map(e=>(0,i.jsx)("li",{children:(0,i.jsxs)(o.Link,{to:"/users/".concat(e.id),children:[e.username," (",e.name,")"]})},e.id))})})})};function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function m(e,r,t){return(r=function(e){var r=function(e){if("object"!=j(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,"string");if("object"!=j(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==j(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function y(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function x(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?y(Object(t),!0).forEach(function(r){m(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}const f=require("axios");var b=e.n(f);const v=require("redux-saga/effects"),g="users/GET_USERS",S="users/GET_USERS_SUCCESS",E="users/GET_USERS_FAILURE",O="users/GET_USER",R="users/GET_USER_SUCCESS",P="users/GET_USER_FAILURE",_=()=>async e=>{try{e({type:g});e((r=(await b().get("https://jsonplaceholder.typicode.com/users")).data,{type:S,payload:r}))}catch(r){throw e((e=>({type:E,error:!0,payload:e}))(r)),r}var r},w=e=>({type:O,payload:e}),k=e=>b().get("https://jsonplaceholder.typicode.com/users/".concat(e));function*q(e){try{const t=yield(0,v.call)(k,e.payload);yield(0,v.put)((r=t.data,{type:R,payload:r}))}catch(e){yield(0,v.put)((e=>({type:P,payload:e,error:!0}))(e))}var r}function*D(){yield(0,v.takeEvery)(O,q)}const T={users:null,user:null,loading:{users:!1,user:!1},error:{users:null,user:null}},A=require("react"),C=(0,A.createContext)(null),U=C,F=e=>{let{resolve:r}=e;const t=(0,A.useContext)(C);return t?(t.done||t.promises.push(Promise.resolve(r())),null):null},N=()=>{const e=(0,p.useSelector)(e=>e.users.users),r=(0,p.useDispatch)();return(0,A.useEffect)(()=>{e||r(_())},[r,e]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h,{users:e}),(0,i.jsx)(F,{resolve:()=>r(_)})]})},G=e=>{let{user:r}=e;const{email:t,name:n,username:s}=r;return(0,i.jsxs)("div",{children:[(0,i.jsxs)("h1",{children:[s," (",n,")"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("b",{children:"e-mail: "}),t]})]})},I=e=>{let{id:r}=e;const t=(0,p.useSelector)(e=>e.users.user),n=(0,p.useDispatch)();return(0,A.useEffect)(()=>{t&&t.id===parseInt(r,10)||n(w(r))},[n,r,t]),t?(0,i.jsx)(G,{user:t}):(0,i.jsx)(F,{resolve:()=>n(w(r))})},L=()=>{const{id:e}=(0,o.useParams)();return(0,i.jsx)(I,{id:e})},J=()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(N,{}),(0,i.jsx)(o.Routes,{children:(0,i.jsx)(o.Route,{path:":id",element:(0,i.jsx)(L,{})})})]}),M=()=>(0,i.jsx)("div",{style:{textAlign:"center",marginTop:"5rem"},children:(0,i.jsx)("h2",{children:"Not found page."})}),B=()=>(0,i.jsx)(M,{}),Y=require("redux-actions"),W="counter/INCREASE",$="counter/DECREASE",z=(0,Y.createAction)(W),H=(0,Y.createAction)($),K=(0,Y.handleActions)({[W]:e=>e+1,[$]:e=>e-1},0),Q=e=>{let{onIncrease:r,onDecrease:t,number:n}=e;return(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{children:n}),(0,i.jsx)("button",{onClick:r,children:"+1"}),(0,i.jsx)("button",{onClick:t,children:"-1"})]})},V=(0,p.connect)(e=>({number:e.counter}),{increase:z,decrease:H})(e=>{let{number:r,increase:t,decrease:n}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Q,{number:r,onIncrease:t,onDecrease:n}),(0,i.jsx)(F,{resolve:()=>t}),(0,i.jsx)(F,{resolve:()=>n})]})}),X=()=>(0,i.jsx)(V,{}),Z=function(){return(0,i.jsxs)("div",{children:[(0,i.jsx)(c,{}),(0,i.jsx)("hr",{}),(0,i.jsxs)(o.Routes,{children:[(0,i.jsx)(o.Route,{path:"/red",element:(0,i.jsx)(u,{})}),(0,i.jsx)(o.Route,{path:"/blue",element:(0,i.jsx)(d,{})}),(0,i.jsx)(o.Route,{path:"/users/*",element:(0,i.jsx)(J,{})}),(0,i.jsx)(o.Route,{path:"/counter",element:(0,i.jsx)(X,{})}),(0,i.jsx)(o.Route,{path:"/*",element:(0,i.jsx)(B,{})})]})]})},ee=require("path");var re=e.n(ee);const te=require("fs");var ne=e.n(te);const se=require("redux"),oe=require("redux-thunk");function*ie(){yield(0,v.all)([D()])}const ce=(0,se.combineReducers)({users:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case g:return x(x({},e),{},{loading:x(x({},e.loading),{},{users:!0})});case S:return x(x({},e),{},{loading:x(x({},e.loading),{},{users:!1}),users:r.payload});case E:return x(x({},e),{},{loading:x(x({},e.loading),{},{users:!1}),error:x(x({},e.error),{},{users:r.payload})});case O:return x(x({},e),{},{loading:x(x({},e.loading),{},{user:!0}),error:x(x({},e.error),{},{user:null})});case R:return x(x({},e),{},{loading:x(x({},e.loading),{},{user:!1}),user:r.payload});case P:return x(x({},e),{},{loading:x(x({},e.loading),{},{user:!1}),error:x(x({},e.error),{},{user:r.payload})});default:return e}},counter:K}),ae=require("redux-saga");var ue=e.n(ae);const le=JSON.parse(ne().readFileSync(re().resolve(__dirname,"../build/asset-manifest.json"),"utf-8")),de=Object.keys(le.files).filter(e=>/chunk\.js$/.exec(e)).map(e=>'<script src="'.concat(le.files[e],'"><\/script>')).join(""),pe=s()(),he=s().static(re().resolve(__dirname,"../build"),{index:!1});pe.use(he),pe.use(async(e,r,n)=>{const s=ue()(),c=(0,se.legacy_createStore)(ce,(0,se.applyMiddleware)(oe.thunk,s));s.run(ie);const a=s.run(ie).toPromise(),u={done:!1,promises:[]},l=(0,i.jsx)(U.Provider,{value:u,children:(0,i.jsx)(p.Provider,{store:c,children:(0,i.jsx)(o.StaticRouter,{location:e.url,context:{},children:(0,i.jsx)(Z,{})})})});t().renderToStaticMarkup(l),c.dispatch(ae.END);try{await a,await Promise.all(u.promises)}catch(e){return r.status(500)}u.done=!0;const d=t().renderToString(l),h=JSON.stringify(c.getState()).replace(/</g,"\\u003c"),j="<script>__PRELOADED_STATE__ = ".concat(h,"<\/script>");r.send(function(e,r){return'<!DOCTYPE html>\n  <html lang="en">\n    <head>\n        <meta charset="UTF-8" />\n        <link rel="shortcut icon" href="/favicon.ico" />\n        <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n        <meta name="theme-color" content="#000000" />\n        <title>React App</title>\n        <link href="'.concat(le.files["main.css"],'" rel="stylesheet" />\n    </head>\n    <body>\n        <noscript>You need to enable JavaScript to run this app.</noscript>\n        <div id="root">').concat(e,"</div>\n        ").concat(r,"\n        ").concat(de,'\n        <script src="').concat(le.files["main.js"],'"><\/script>\n    </body>\n  </html>')}(d,j))}),pe.listen(5e3,()=>{console.log("Running on http://localhost:5000")})})();